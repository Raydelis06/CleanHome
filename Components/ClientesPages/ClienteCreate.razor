@using CleanHome.Extensions
@using CleanHome.Models
@using CleanHome.Services
@inject ClienteService clienteService
@inject NavigationManager navegar
@inject ToastService toastService
@page "/Clientes/Crear_Cliente"
@rendermode InteractiveServer

<PageTitle>Crear Cliente</PageTitle>
<EditForm Model="cliente" OnValidSubmit="Guardar">
	<DataAnnotationsValidator />
	<div class="container">
		<div class="card shadow-lg">
			<div class="card-header text-center">
				<h5 class="card-title">Crear Cliente</h5>
			</div>

			<div class="card-body ">
                <div class="row gx-2 g-5 mt-1 mb-1 justify-content-center">
                    @* Cédula *@
                    <div class="col-md-5">
                        <label class="form-label"><strong>Cédula</strong></label>
                        <InputText class="form-control" @bind-Value="cliente.Cedula"></InputText>
                        <ValidationMessage For="@(() => cliente.Cedula)" />
                    </div>
                    @* Dirección *@
                    <div class="col-md-5">
                        <label class="form-label"><strong>Dirección</strong></label>
                        <InputText class="form-control" @bind-Value="cliente.Direccion"></InputText>
                        <ValidationMessage For="@(() => cliente.Direccion)" />
                    </div>
                    @* Nombre *@
                    <div class="col-md-5">
                        <label class="form-label"><strong>Nombre</strong></label>
                        <InputText class="form-control" @bind-Value="cliente.Nombre"></InputText>
                        <ValidationMessage For="@(() => cliente.Nombre)" />
                    </div>
                    @* Teléfono *@
                    <div class="col-md-5">
                        <label class="form-label"><strong>Teléfono</strong></label>
                        <InputText class="form-control" @bind-Value="cliente.Telefono"></InputText>
                        <ValidationMessage For="@(() => cliente.Telefono)" />
                    </div>

                </div>
			</div>

			@*footer*@
			<div class="card-footer text-center mt-2">
				<a href="/Clientes" class="btn btn-secondary"> <span class="bi bi-arrow-left"></span> Volver</a>
				<button type="submit" class="btn btn-primary bi bi-floppy">Guardar</button>
			</div>
		</div>
	</div>
</EditForm>

@code
{
    private Clientes cliente = new();

    private async Task Guardar()
    {
        var guardar = await clienteService.Guardar(cliente);
        if (guardar)
        {
            toastService.ShowSuccess("El cliente ha sido creado con exito!");
            navegar.NavigateTo("/Clientes");
        }
        else
        {
            toastService.ShowError("Ha ocurrido un error al crear el cliente");
        }
    }

}